% File 'bw-serializable'

:- sorts
  location >> block.

:- objects
  table                         :: location.

:- constants
  loc(block)                    :: inertialFluent(location);
  move(block)                   :: exogenousAction;
  destination(block)            :: attribute(location) of move(block).

:- variables
  B,B1                          :: block;
  L                             :: location.

% effect of moving a block
move(B) causes loc(B)=L if destination(B)=L.

% a block can be moved only when it is clear
nonexecutable move(B) if loc(B1)=B.

% a block can be moved only to a position that is clear
%^nonexecutable move(B) if destination(B)=loc(B1) & destination(B)\=table.

% a block can't be moved onto a block that is being moved also
nonexecutable move(B) & move(B1) if destination(B)=B1.

% two blocks can't be on the same block at the same time
constraint loc(B)=loc(B1) ->> loc(B)=table where B @< B1.

/*
:- constants
  supported(block)              :: sdFluent.

caused supported(B) if loc(B)=table.
caused supported(B) if loc(B)=B1 & supported(B1).
default -supported(B).
constraint loc(B)\=B .

% every block is supported by the table
%constraint supported(B).
*/

:- constants
  above(block,location) :: sdFluent.

:- variables
  B, B1                 :: block;
  L                     :: location.

% definition of above

caused above(B,L) if loc(B)=L.
caused above(B,L) if loc(B)=B1 & above(B1,L).
default -above(B,L).
constraint -above(B,B).

% every block is supported by the table
%constraint above(B,table).
