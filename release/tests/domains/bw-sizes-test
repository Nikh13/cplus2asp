% File 'bw-sizes-test'
% A query in the blocks world with blocks a,b,c,d.
%  Block d is large; the others are small

:- include 'domains/bw-sizes'.

:- objects
  a,b,c,d               :: block.

large(d).
default -large(B).

:- nmquery

% Initially, the blocks form two towers:
%
%    a   c  
%    b   d  
%  ---------
%
%  In 2 steps, arrange the blocks in a single tower.

 maxstep :: 2;
 anyHistory;

 constraint 0:
  loc(a)=b,
  loc(b)=table,
  loc(c)=d,
  loc(d)=table;

 constraint maxstep:
  loc(B)=table && loc(B1)=table ->> B=B1.

/*
| ?- loadf 'bw-sizes-test'.
% loading file /stage/projects3/tag/ccalc/macros.std
% loading file /stage/projects3/tag/ccalc/examples/bw-sizes-test
% loading file /stage/projects3/tag/ccalc/examples/bw-sizes
% loading file /stage/projects3/tag/ccalc/examples/bw-serializable
% in transition mode...
% 72 atoms, 317 rules, 392 clauses
% Grounding time: 0.52 seconds
% Completion time: 0.11 seconds
yes
| ?- nmquery 0.
% Shifted theory: 120 atoms (incl. auxiliary atoms), 700 clauses, 0.37 seconds
% Calling mChaff... 
% Solution time: 0.02 seconds (prep 0.01 seconds, search 0.01 seconds)  

large(d)  

0:  loc(a)=b  loc(b)=table  loc(c)=d  loc(d)=table 

ACTIONS:  move(a,destination:c)  

1:  loc(a)=c  loc(b)=table  loc(c)=d  loc(d)=table 

ACTIONS:  move(b,destination:a)  

2:  loc(a)=c  loc(b)=a  loc(c)=d  loc(d)=table 
yes
| ?- 
*/